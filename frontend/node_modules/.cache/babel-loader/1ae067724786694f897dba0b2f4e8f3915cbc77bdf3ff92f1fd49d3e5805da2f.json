{"ast":null,"code":"import _slicedToArray from\"/home/yc-user/taski/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import TaskEditModal from\"./components/TaskEditModal\";import Task from\"./components/Task\";import TabList from\"./components/TabList\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";axios.interceptors.response.use(function(response){if(response.headers['content-type']!=='application/json'){alert('unsupport data format in server response');return Promise.reject(new Error('unsupport data format'));}return response;});var App=function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isShowCompleted=_useState2[0],setIsShowCompleted=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),taskList=_useState4[0],setTaskList=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),activeTask=_useState6[0],setActiveTask=_useState6[1];var refreshList=function refreshList(){axios.get(\"/api/tasks/\").then(function(res){return setTaskList(res.data);}).catch(console.error);};useEffect(function(){refreshList();},[]);var handleSubmit=function handleSubmit(item){var request=item.id?axios.put(\"/api/tasks/\".concat(item.id,\"/\"),item):axios.post(\"/api/tasks/\",item);request.then(function(res){refreshList();setActiveTask(null);}).catch(console.error);};var handleDelete=function handleDelete(item){axios.delete(\"/api/tasks/\".concat(item.id,\"/\")).then(refreshList).catch(console.error);};var createTask=function createTask(){setActiveTask({title:\"\",description:\"\",completed:false});};var showedTasks=taskList.filter(function(item){return item.completed===isShowCompleted;});return/*#__PURE__*/_jsxs(\"main\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text text-uppercase text-center my-4\",children:\"Taski\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-sm-10 mx-auto p-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:createTask,children:\"Add task\"})}),/*#__PURE__*/_jsx(TabList,{displayCompleted:setIsShowCompleted,isShowCompleted:isShowCompleted}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-group list-group-flush border-top-0\",children:showedTasks.map(function(task){return/*#__PURE__*/_jsx(Task,{data:task,handleEdit:setActiveTask,handleDelete:handleDelete},task.id);})})]})})}),activeTask&&/*#__PURE__*/_jsx(TaskEditModal,{taskData:activeTask,toggle:function toggle(){return setActiveTask(null);},onSave:handleSubmit})]});};export default App;","map":{"version":3,"names":["React","useEffect","useState","axios","TaskEditModal","Task","TabList","interceptors","response","use","headers","alert","Promise","reject","Error","App","isShowCompleted","setIsShowCompleted","taskList","setTaskList","activeTask","setActiveTask","refreshList","get","then","res","data","catch","console","error","handleSubmit","item","request","id","put","post","handleDelete","delete","createTask","title","description","completed","showedTasks","filter","map","task"],"sources":["/home/yc-user/taski/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport TaskEditModal from \"./components/TaskEditModal\";\nimport Task from \"./components/Task\";\nimport TabList from \"./components/TabList\";\n\naxios.interceptors.response.use(function (response) {\n  if (response.headers['content-type'] !== 'application/json') {\n    alert('unsupport data format in server response')\n    return Promise.reject(new Error('unsupport data format'));\n  }\n  return response;\n});\n\nconst App = () => {\n  const [isShowCompleted, setIsShowCompleted] = useState(false);\n  const [taskList, setTaskList] = useState([]);\n  const [activeTask, setActiveTask] = useState(null);\n\n  const refreshList = () => {\n    axios\n      .get(\"/api/tasks/\")\n      .then((res) => setTaskList(res.data))\n      .catch(console.error);\n  };\n\n  useEffect(() => {\n    refreshList();\n  }, []);\n\n  const handleSubmit = (item) => {\n    const request = item.id\n      ? axios.put(`/api/tasks/${item.id}/`, item)\n      : axios.post(\"/api/tasks/\", item);\n\n    request\n      .then((res) => {\n        refreshList();\n        setActiveTask(null);\n      })\n      .catch(console.error);\n  };\n\n  const handleDelete = (item) => {\n    axios\n      .delete(`/api/tasks/${item.id}/`)\n      .then(refreshList)\n      .catch(console.error);\n  };\n\n  const createTask = () => {\n    setActiveTask({ title: \"\", description: \"\", completed: false });\n  };\n\n  const showedTasks = taskList.filter(\n    (item) => item.completed === isShowCompleted\n  );\n\n  return (\n    <main className=\"container\">\n      <h1 className=\"text text-uppercase text-center my-4\">Taski</h1>\n      <div className=\"row\">\n        <div className=\"col-md-6 col-sm-10 mx-auto p-0\">\n          <div className=\"card p-3\">\n            <div className=\"mb-4\">\n              <button className=\"btn btn-primary\" onClick={createTask}>\n                Add task\n              </button>\n            </div>\n            <TabList\n              displayCompleted={setIsShowCompleted}\n              isShowCompleted={isShowCompleted}\n            />\n            <ul className=\"list-group list-group-flush border-top-0\">\n              {showedTasks.map((task) => (\n                <Task\n                  key={task.id}\n                  data={task}\n                  handleEdit={setActiveTask}\n                  handleDelete={handleDelete}\n                />\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n      {activeTask && (\n        <TaskEditModal\n          taskData={activeTask}\n          toggle={() => setActiveTask(null)}\n          onSave={handleSubmit}\n        />\n      )}\n    </main>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}